<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <link rel="apple-touch-icon" sizes="57x57" href="favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="manifest" href="favicon/manifest.json">
  <meta name="msapplication-TileColor" content="#000000">
  <meta name="msapplication-TileImage" content="favicon/ms-icon-144x144.png">
  <meta name="theme-color" content="#000000">
  <title>GVTC Webmaps</title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
  <!-- <link href="css/light-bootstrap-dashboard.css" rel="stylesheet" /> -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <script src="leaflet/leaflet.js" charset="utf-8"></script>
  <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.11.4/themes/ui-lightness/jquery-ui.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <script src="data/GVTC_parks.geojson" charset="utf-8"></script>
  <script src="data/Parks_Outside.geojson" charset="utf-8"></script>
  <script src="data/waterbodies.geojson" charset="utf-8"></script>
  <script src="data/poverty.geojson" charset="utf-8"></script>
  <script src="data/Conflict.geojson" charset="utf-8"></script>
  <script src="data/hippos.js" charset="utf-8"></script>
  <script src="data/Gorilla_habitat.geojson" charset="utf-8"></script>
  <script src="data/Elephant_habitat.geojson" charset="utf-8"></script>

</head>

<body>
  <div class="wrapper">
    <div class="sidebar" style="position: absolute; float: left; height: 100%; width: 300px; border:1px solid black; top: 100px;">
      <div class="sidebar-wrapper">
        <div class="nav-link" style="padding-left: 20px; background-color: #1F532C;">
          <p style="font-size: 25px; color: #fff;">Key Species</p>
        </div>
        <div class="nav-link">
          <label style="padding-left: 10px; font-size: 20px;" for="from">Filter:</label>
          <input type="text" id="from" name="from" style="background-color: gray;">
        </div>
        <li class="nav-link" style="padding-left: 10px;">
          <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle" style="text-decoration: none; color: #000000;">Select Animal</a>
        </li>
        <div id=containers>

          <div id=container1 style="position: relative;">
          </div>

          <div id=container2 style="position: relative;">
          </div>
        </div>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg " color-on-scroll="500">
        <div class="container-fluid">
          <div class="collapse navbar-collapse justify-content-end" id="navigation" style="position: static;">
            <div class="">
              <p style="padding-left: 700px; padding-top: 20px; padding-bottom: 50px; font-size: 30px; width: auto;">
                GREATER VIRUNGA LANDSCAPE
              </p>
            </div>
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a id="log" href="landpage.html"><img class="logout" src="images/home.png" /></a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- End Navbar -->
      <div class="content" style="position: absolute; left: 350px; padding-top: 0px;">
        <div class="container-fluid">
          <div>
            <div class="card" style="padding-top: 0px; position: relative; width: 1050px; height: 850px;">
              <div class="card-body" style="padding-top: 0px; position: relative; width: 1050px; height: 850px;">
                <div id="map" style="width: 1050px; height: 850px;">
                  <nav id='filters' class='filter-ui'>
                  </nav>
                </div>
              </div>
            </div>
          </div>
          <div>
            <img class="gecko" style="position: absolute; left: 1150px; top: 0px; bottom: 0px; width: 300px;" src="images/legend_map1.PNG">
          </div>
          <a style="position: relative; left: 450px; top: 450px;" href="https://www.geogecko.com/" target="_blank"><img class="gecko" style="width: 300px;" src="images/Geogecko.png"></a>
        </div>
      </div>
    </div>
  </div>
  </div>
  </div>

  <script>
    function setParent(el, newParent) {
      newParent.appendChild(el);
    }

    var map = L.map('map').setView([-0.002060, 29.392247], 10);

    var CartoDB_Positron = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>',
    subdomains: 'abcd',
    maxZoom: 8
    // minZoom: 20
    }).addTo(map);
  </script>

  <script>
    L.geoJson(GVTC_parks).addTo(map);

    var myStyle = {
      weight: 2,
      opacity: 1,
      color: '#72AC54',
      fillOpacity: 2.5,
      fillColor: '#72AC54'
    };

    L.geoJSON(GVTC_parks, {
      style: myStyle
    }).addTo(map);

    function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
    }
  </script>

  <script>
    L.geoJson(Parks_Outside, {
      style: {
        weight: 2,
        opacity: 1,
        color: '#808080',
        fillOpacity: 0,
        fillColor: '#808080'
      }
    }).addTo(map);

    function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
    }
  </script>

  <script>
    L.geoJson(waterbodies).addTo(map);

    var myStyle = {
      weight: 2,
      opacity: 1,
      color: '#CAEBFC',
      fillOpacity: 2.5,
      fillColor: '#CAEBFC'
    };

    L.geoJSON(waterbodies, {
      style: myStyle
    }).addTo(map);

    function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
    }
  </script>

  <script>
    var pov = L.geoJson(poverty, {
      style: style
    });

    function getColor(d) {
      return d > 0.22 ? '#00441b' :
        d > 0.18 ? '#1d8641' :
        d > 0.15 ? '#54b567' :
        d > 0.11 ? '#9ed898' :
        d > 0.8 ? '#caefc0' :
        '#fcfce0';

    }

    function style(feature) {
      return {
        fillColor: getColor(feature.properties.Poverty_5),
        weight: 1,
        opacity: 1,
        color: 'black',
        dashArray: '1',
        fillOpacity: 1
      };
    }


    function highlightFeature(e) {
      var layer = e.target;

      if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
      }
    }

    function resetHighlight(e) {
      geojson.resetStyle(e.target);
    }

    function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
    }

  </script>

  <script>
    var Conflict = L.geoJson(Conflict, {
      style: {
        weight: 2,
        opacity: 1,
        color: '#808080',
        fillOpacity: 2.5,
        fillColor: '#808080'
      }
    });

    function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
    }
  </script>

  <script>
    var Elephant = L.geoJson(Elephant_habitat,{
      style: {
        weight: 2,
        opacity: 1,
        color: '#006400',
        fillOpacity: 0,
        fillColor: '#006400'
      }
    });

    function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
    }
  </script>

  <script>
    var Gorilla = L.geoJson(Gorilla_habitat,{
      style: {
        weight: 2,
        opacity: 1,
        color: '#FF0000',
        fillOpacity: 0,
        fillColor: '#FF0000'
      }
    });

    function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
    }
  </script>

  <script>
    var geojsonMarkerOptions = {
      radius: 2,
      fillColor: "#07528B",
      color: "#000",
      weight: 0.6,
      opacity: 1,
      fillOpacity: 1
    };

    var Hip = L.geoJson(hippos, {
      pointToLayer: function(feature, latlng) {
        return L.circleMarker(latlng, geojsonMarkerOptions);
      },
      onEachFeature: function(features, featureLayer) {
        featureLayer.bindPopup(features.properties.Name);
        featureLayer.on('click', function(e) {
          map.setView(e.latlng, 8)
        });

      }
    });
  </script>

  <script>
    var baseMaps = {
      "Gorilla Habitat": Gorilla,
      "Hippos": Hip,
      "Elephant Habitat": Elephant
    };
    var overlayMaps = {

      "Boundary Conflicts": Conflict,
      "Household Poverty Rates": pov,
      // "Population Density": outsid,
      // "LandCover Classification": park
    };

    L.control.layers("", baseMaps, {
      collapsed: false,
      position: 'topright'
    }).addTo(map);

    var legendFrom = $('.leaflet-top.leaflet-right');
    var legendTo = $('#container1');
    setParent(legendFrom[0], legendTo[0]);
    L.control.layers("", overlayMaps, {
      collapsed: false,
      position: "bottomleft"
    }).addTo(map);

    var legendFrom = $('.leaflet-bottom.leaflet-left');
    var legendTo = $('#container2');
    setParent(legendFrom[0], legendTo[0]);

    $(".leaflet-bottom.leaflet-left").removeClass(".leaflet-bottom.leaflet-left");
    $(".leaflet-top.leaflet-right").removeClass(".leaflet-top.leaflet-right");
  </script>

  <script>
    function layer() {
      var layer = this;
      console.log(layer)
      var name = layer.getGeoJSON().name;
      var item = filters.appendChild(document.createElement('div'));
      var checkbox = item.appendChild(document.createElement('input'));
      var label = item.appendChild(document.createElement('label'));
      checkbox.type = 'checkbox';
      checkbox.id = name;
      label.innerHTML = name;
      label.setAttribute('for', name);
      checkbox.addEventListener('change', update);

      function update() {
        (checkbox.checked) ? layer.addTo(map): map.removeLayer(layer);
      }
    }
  </script>


</body>

</html>
